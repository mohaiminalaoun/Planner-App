(this.webpackJsonpplanner=this.webpackJsonpplanner||[]).push([[0],{158:function(e,t,a){e.exports=a(287)},163:function(e,t,a){},164:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},279:function(e,t,a){},287:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(10),r=a.n(l),o=(a(163),a(21)),c=a(24),i=a(22),u=a(51),d=a(23),m=a(7),p=a.n(m),k=(a(164),a(106)),h=a.n(k),b=(a(165),a(166),a(30)),g=(a(167),function(e){return function(t){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(d.a)(a,t),Object(b.a)(a,[{key:"render",value:function(){var t=this.props,a={left:t.tempPosition[0]+150<window.screen.width?t.tempPosition[0]+"px":t.tempPosition[0]-150+"px",top:t.tempPosition[1]+"px"};return s.a.createElement(e,Object.assign({},this.props,{divStyle:a,name:"Mohaimin"}))}}]),a}(s.a.Component)}),C=a(289),f=a(108),v=a(296),x=g((function(e){return s.a.createElement("div",{className:"taskContextMenu",style:e.divStyle},s.a.createElement(C.a,{className:"mb-3"},s.a.createElement(f.a,{onChange:e.changeFn,value:e.curDeadline,placeholder:"Add deadline to task","aria-label":"Add deadline to task","aria-describedby":"basic-addon2"})),s.a.createElement(C.a.Append,null,s.a.createElement(v.a,{className:"deadline-close-btn",onClick:e.closeFn,variant:"outline-secondary"},"Close")))})),T=(a(170),a(293)),L=function(e){var t=e.menuOptionsList.map((function(e){return s.a.createElement(T.a.Item,{className:"menuOption",key:e.text,onClick:e.onClick},e.text)})),a={left:e.tempPosition[0]+150<window.screen.width?e.tempPosition[0]+"px":e.tempPosition[0]-150+"px",top:e.tempPosition[1]+"px"};return s.a.createElement(T.a,{className:"menuItems",id:"menuItems",style:a},t)},y=(a(171),a(292)),E=g((function(e){return s.a.createElement("div",{className:"linkContextMenu",style:e.divStyle},s.a.createElement(y.a,{className:"mb-3"},s.a.createElement(y.a.Group,{controlId:"formAddURL"},s.a.createElement(f.a,{onChange:e.changeURLFn,value:e.currentURL,placeholder:"Add url","aria-label":"Add url","aria-describedby":"basic-addon2"})),s.a.createElement(y.a.Group,{controlId:"formAddURLText"},s.a.createElement(f.a,{onChange:e.changeURLTextFn,value:e.currentURLText,placeholder:"Add text to show","aria-label":"Add text to show","aria-describedby":"basic-addon2"})),s.a.createElement("div",null,s.a.createElement(v.a,{variant:"primary",className:"okContextMenuBtn",onClick:e.saveFn},"Ok"),s.a.createElement(v.a,{variant:"secondary",onClick:e.closeFn},"Cancel"))))})),S=(a(174),a(290)),M=g((function(e){var t=["secondary","success","danger","warning","info","light","dark"].map((function(t,a){return s.a.createElement("div",{key:a,className:"badgeOption "+t+(a===e.selectedLabelIdx?" clicked":""),onClick:function(){e.selectedLabelIdxChange(a)}})})),a=[];e.labels.forEach((function(e){a.push(e)}));var n=function(t){e.currentLabelChangeByClick(t.currentTarget.getAttribute("value"))},l=-1,r=a.map((function(e){return l++,s.a.createElement(S.a,{key:l,className:"prevUsedLabel",variant:"warning",onClick:n,value:e},e)}));return s.a.createElement("div",{className:"labelContextMenu",style:e.divStyle},s.a.createElement(y.a,{className:"mb-3"},s.a.createElement(y.a.Group,{controlId:"formAddLabel"},s.a.createElement(f.a,{placeholder:"Label","aria-label":"Add url","aria-describedby":"basic-addon2",value:e.currentLabel,onChange:e.currentLabelChange})),s.a.createElement("h6",{className:"badge-container-heading"},"Choose color"),s.a.createElement("div",{className:"badge-container"},t),s.a.createElement("div",{className:"prevBadgeContainer"},r," "),s.a.createElement("div",null,s.a.createElement(v.a,{variant:"primary",className:"okContextMenuBtn",onClick:e.saveLabel},"Ok"),s.a.createElement(v.a,{variant:"secondary",onClick:e.cancelSaveLabel},"Cancel"))))})),w=(a(175),g((function(e){return s.a.createElement("div",{className:"deleteContextMenu",style:e.divStyle},s.a.createElement("div",null,"Are you sure you want to delete this task?"),s.a.createElement(v.a,{style:{marginRight:"8px"},className:"cancelDelete",variant:"secondary",onClick:e.cancelDelete},"Cancel"),s.a.createElement(v.a,{variant:"danger",onClick:function(){return e.deleteTask(e.tempTask)}},"Delete task"))}))),N=a(111),D=a.n(N),I=(a(279),a(280),a(291)),O=new(a(112).a)("Planner");O.version(1).stores({tasks:"++id, userName, task"});var R=O,F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).closeFn=function(){var e=null;a.props.tasks.forEach((function(t){t.task===a.props.currentModalTask&&(e=t)})),R.tasks.where("task").equalsIgnoreCase(a.props.currentModalTask).first((function(t){t&&(console.log("found item"),R.tasks.put({userName:a.props.userName,task:a.props.currentModalTask,endTime:e.end,richText:a.props.richText,id:t.id,label:t.label,selectedLabelIdx:t.selectedLabelIdx}))})).then((function(){a.props.closeFn()}))},a.state={text:e.richText||""},a}return Object(d.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props;return s.a.createElement(I.a,{show:e.show,onHide:e.onHide,centered:!0},s.a.createElement(I.a.Header,{closeButton:!0},s.a.createElement(I.a.Title,null,e.currentModalTask)),s.a.createElement(I.a.Body,null,s.a.createElement(y.a.Group,{controlId:"exampleForm.ControlTextarea1"},s.a.createElement(y.a.Label,null,e.currentModalTask&&"Due by: "+p()(e.currentModalTaskEnd).format("LLLL")),s.a.createElement(D.a,{value:e.richText||"",onChange:e.onRichTextChange}))),s.a.createElement(I.a.Footer,null,s.a.createElement(v.a,{variant:"secondary",onClick:this.closeFn},"Close"),s.a.createElement(v.a,{variant:"primary",onClick:this.closeFn},"Save Changes")))}}]),t}(s.a.Component),A=(a(15),a(114)),U=a.n(A),j=(a(284),function(e){function t(e){var a;Object(o.a)(this,t),a=Object(c.a)(this,Object(i.a)(t).call(this,e));var n=p()(new Date).subtract(30,"days").format("YYYY-MM-DD"),s=p()(new Date).add(100,"days").format("YYYY-MM-DD");return a.state={dates:[],firstDate:n,lastDate:s},a}return Object(d.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e={},t=[];for(var a in this.props.tasks.forEach((function(t){if(t.end){var a=p()(t.end).format("YYYY-MM-DD");e[a]=e[a]?e[a]+1:1}})),e)t.push({date:a,count:e[a]});this.setState({dates:t})}},{key:"render",value:function(){return s.a.createElement("div",{className:"dashboard"},s.a.createElement(U.a,{startDate:new Date(this.state.firstDate||"2020-01-01"),endDate:new Date(this.state.lastDate||"2020-06-12"),values:this.state.dates,titleForValue:function(e){return e&&"".concat(e.date," : ").concat(e.count," tasks")}}))}}]),t}(s.a.Component)),P=a(57),B=a(294),Y=a(295),_=a(297),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).responseFacebook=function(e){var t=[],n=new Set;window.localStorage.setItem("todousername",e.name),R.tasks.where("userName").equalsIgnoreCase(e.name).each((function(e){e.label&&n.add(e.label),t.push({task:e.task,end:e.endTime,url:e.url,urlText:e.urlText,progressState:e.progressState,label:e.label,selectedLabelIdx:e.selectedLabelIdx})})).then((function(){a.props.facebookLoginDispatch({loggedin:!0,userName:e.name}),a.setState({tasks:t,labels:n})}))},a.logOutFacebook=function(){window.localStorage.removeItem("todousername"),window.FB.logout(),a.props.facebookLoginDispatch({loggedin:!1,userName:"User"})},a.addToList=function(e){if(a.state.curTask.trim().length>=1){var t=a.state.curTask,n=a.state.tasks;n.push({task:t}),a.setState({tasks:n,curTask:""}),R.tasks.put({userName:a.props.userName,task:t})}},a.closeAllCtxMenus=function(){a.setState({displayAllContextMenus:!1,displaySortingOptionsMenu:!1,displayCurtain:!1,displayDeleteCtxMenu:!1})},a.handleInputChange=function(e){a.setState({curTask:e.target.value})},a.deleteTask=function(e){for(var t,n=a.state.tasks,s=e,l=0;l<n.length;l++)if(n[l].task===s){t=l;break}n=n.slice(0,t).concat(n.slice(t+1,n.length)),a.setState({tasks:n,displayDeleteCtxMenu:!1}),R.tasks.where("task").equalsIgnoreCase(s).delete()},a.showDeadlineContextMenu=function(e){a.setState({displayAllContextMenus:!0,displayCurtain:!0,tempTask:e.currentTarget.value,tempPosition:[e.clientX,e.clientY]})},a.endTimeCloseFn=function(){var e=a.state.tasks.concat(),t=a.state.tempTask;a.setState({displayTaskCtxMenu:!1});var n=parseInt(a.state.curDeadline);if(Number.isInteger(n)){for(var s=0;s<e.length;s++)if(e[s].task===t){e[s].end=p()(new Date).add(n,"hour")._d;break}var l;a.setState({tasks:e}),R.tasks.where("task").equalsIgnoreCase(t).first((function(e){if(Number.isInteger(n)){l=e;var s=p()().add(n,"hour");R.tasks.put({userName:a.props.userName,task:t,richText:l.richText,endTime:s._d,id:l.id,label:l.label,selectedLabelIdx:l.selectedLabelIdx})}}))}a.setState({tempTask:"",curDeadline:""})},a.linkCloseFn=function(){a.setState({displayLinkCtxMenu:!1,currentURL:"",currentURLText:""})},a.saveLinkFn=function(){for(var e=a.state,t=e.currentURL,n=e.currentURLText,s=e.tempTask,l=a.state.tasks.concat(),r=0;r<l.length;r++)if(l[r].task===s){l[r].url=t,l[r].urlText=n;break}R.tasks.where("task").equalsIgnoreCase(s).first((function(e){var l=e;R.tasks.put({userName:a.props.userName,task:s,endTime:l.endTime,url:t,urlText:n,id:l.id})})),a.setState({displayLinkCtxMenu:!1,tasks:l,currentURL:"",currentURLText:""})},a.deadlineChangeFn=function(e){a.setState({curDeadline:e.target.value})},a.changeURLTextFn=function(e){a.setState({currentURLText:e.target.value})},a.changeURLFn=function(e){a.setState({currentURL:e.target.value})},a.changeProgressState=function(e){var t=e.currentTarget.value,n=e.currentTarget.getAttribute("task");e.currentTarget.parentElement.parentElement.classList.remove("show");for(var s=a.state.tasks.concat(),l=0;l<s.length;l++)if(s[l].task===n){s[l].progressState=t;break}R.tasks.where("task").equalsIgnoreCase(n).first((function(e){var s=e;R.tasks.put({userName:a.props.userName,task:n,endTime:s.endTime,url:s.url,urlText:s.urlText,progressState:t,id:s.id})})),a.setState({displayLinkCtxMenu:!1,tasks:s,currentURL:"",currentURLText:""})},a.showColors=function(e){var t="true"===e.currentTarget.value;a.setState({shouldShowColors:!t})},a.openTaskModal=function(e){var t=e.currentTarget.getAttribute("value");R.tasks.where("task").equalsIgnoreCase(t).first((function(e){a.setState({showModal:!0,currentModalTask:e.task,currentModalTaskEnd:e.endTime,currentRichText:e.richText})}))},a.handleQuillClose=function(){a.setState({showModal:!1})},a.richTextChange=function(e){a.setState({currentRichText:e,didRichTextChange:!0})},a.componentDidMount=function(){null!==window.localStorage.getItem("todousername")&&a.responseFacebook({name:window.localStorage.getItem("todousername")})},a.saveLabel=function(){var e=a.state.currentLabel,t=a.state.tempTask,n=a.state.labels;n.add(e),R.tasks.where("task").equalsIgnoreCase(t).first((function(n){var s=n;R.tasks.put({userName:a.props.userName,task:t,endTime:s.endTime,url:s.url,urlText:s.urlText,progressState:s.progressState,id:s.id,label:e,selectedLabelIdx:a.state.selectedLabelIdx})}));for(var s=a.state.tasks.concat(),l=0;l<s.length;l++)if(s[l].task===t){s[l].label=e,s[l].selectedLabelIdx=a.state.selectedLabelIdx;break}a.setState({displayAllContextMenus:!1,displayLabelCtxMenu:!1,currentLabel:"",tasks:s,labels:n})},a.cancelSaveLabel=function(){a.setState({displayAllContextMenus:!1,displayLabelCtxMenu:!1,currentLabel:""})},a.currentLabelChange=function(e){a.setState({currentLabel:e.currentTarget.value})},a.selectedLabelIdxChange=function(e){a.setState({selectedLabelIdx:e})},a.currentLabelChangeByClick=function(e){a.setState({currentLabel:e})},a.sortTasksByLabel=function(){var e=a.state.tasks;e.sort((function(e,t){var a=e.label&&e.label.toUpperCase()||"Z",n=t.label&&t.label.toUpperCase()||"Z";return a<n?-1:a>n?1:0})),a.setState({tasks:e,displaySortingOptionsMenu:!1,displayCurtain:!1})},a.sortTasksByEndTime=function(){var e=a.state.tasks;e.sort((function(e,t){return e.end||(e.end=p()(new Date).subtract(10,"years"),e.removeEnd=!0),t.end||(t.end=p()(new Date).subtract(10,"years"),t.removeEnd=!0),-1*p()(e.end).diff(p()(t.end))})),e.forEach((function(e){e.removeEnd&&(e.end=void 0)})),a.setState({tasks:e,displaySortingOptionsMenu:!1})},a.showSortingOptionsMenu=function(e){a.setState({displaySortingOptionsMenu:!0,displayCurtain:!0,tempPosition:[e.clientX,e.clientY]})},a.showDeleteContextMenu=function(e){a.setState({displayDeleteCtxMenu:!0,displayCurtain:!0,tempTask:e.currentTarget.value,tempPosition:[e.clientX,e.clientY]})},a.cancelDelete=function(){a.setState({displayDeleteCtxMenu:!1,displayCurtain:!1})},a.render=function(){var e=0,t=a.state,n=t.curDeadline,l=t.currentURL,r=t.currentURLText,o=t.curTask,c=t.displayAllContextMenus,i=t.displaySortingOptionsMenu,d=t.displayLinkCtxMenu,m=t.displayTaskCtxMenu,k=t.displayLabelCtxMenu,b=t.displayDeleteCtxMenu,g=t.menuOptionsList,y=t.tempPosition,N=t.shouldShowColors,D=Object(u.a)(a),I=D.addToList,O=D.changeProgressState,R=D.changeURLFn,A=D.changeURLTextFn,U=D.closeAllCtxMenus,P=D.endTimeCloseFn,q=D.deadlineChangeFn,X=D.deleteTask,H=D.handleInputChange,G=D.linkCloseFn,K=D.responseFacebook,Q=D.saveLinkFn,V=D.showDeadlineContextMenu,W=D.showColors,J=D.saveLabel,Z=D.cancelSaveLabel,$=D.showSortingOptionsMenu,z=a.props,ee=z.loggedin,te=z.userName,ae=["secondary","success","danger","warning","info","light","dark"];return s.a.createElement(s.a.Fragment,null,a.state.displayCurtain?s.a.createElement("div",{className:"curtain",onClick:U}):null,s.a.createElement("div",{className:"App"},ee?s.a.createElement("div",{className:"checklist-container"},s.a.createElement(v.a,{variant:"secondary",className:"logout-button",onClick:a.logOutFacebook},"Log out"),s.a.createElement("div",{className:"nameHeader"},"Welcome ",s.a.createElement("span",{className:"userName"},te),s.a.createElement("div",{className:"toggle-container"},s.a.createElement("button",{onClick:W,className:"smallMenuButton ".concat(N),value:N})),s.a.createElement("button",{onClick:$,className:"sortIcon"})),s.a.createElement(F,{show:a.state.showModal,onHide:a.handleQuillClose,tasks:a.state.tasks,task:a.state.currentTask,userName:a.props.userName,onRichTextChange:a.richTextChange,currentModalTask:a.state.currentModalTask,currentModalTaskEnd:a.state.currentModalTaskEnd,didRichTextChange:a.state.didRichTextChange,richText:a.state.currentRichText,closeFn:a.handleQuillClose}),a.state.shouldShowColors?s.a.createElement(j,{tasks:a.state.tasks}):null,s.a.createElement(C.a,{className:"mb-3"},s.a.createElement(f.a,{onChange:H,value:o,placeholder:"Add task to do","aria-label":"Add task to do","aria-describedby":"basic-addon2"}),s.a.createElement(C.a.Append,null,s.a.createElement(v.a,{onClick:I,variant:"outline-secondary"},"Add"))),s.a.createElement(T.a,{className:"listOfTasksContainer"},c?s.a.createElement(L,{tempPosition:y,menuOptionsList:g}):null,i?s.a.createElement(L,{tempPosition:y,menuOptionsList:a.state.sortingOptions}):null,m?s.a.createElement(x,{closeFn:P,changeFn:q,curDeadline:n,tempPosition:y}):null,d?s.a.createElement(E,{tempPosition:y,closeFn:G,saveFn:Q,currentURL:l,currentURLText:r,changeURLTextFn:A,changeURLFn:R}):null,k?s.a.createElement(M,{tempPosition:y,saveLabel:J,currentLabel:a.state.currentLabel,cancelSaveLabel:Z,tempTask:a.state.tempTask,currentLabelChange:a.currentLabelChange,selectedLabelIdx:a.state.selectedLabelIdx,selectedLabelIdxChange:a.selectedLabelIdxChange,labels:a.state.labels,currentLabelChangeByClick:a.currentLabelChangeByClick}):null,b?s.a.createElement(w,{tempPosition:y,tempTask:a.state.tempTask,deleteTask:X,cancelDelete:a.cancelDelete}):null,a.state&&a.state.tasks.map((function(t){return s.a.createElement(T.a.Item,{key:e++},a.state.shouldShowColors?s.a.createElement("div",{className:"color-status "+t.progressState}):null,s.a.createElement("span",{className:"task-title",value:t.task,onClick:a.openTaskModal},t.task),s.a.createElement("div",{className:"endTime"},t.end?p()(t.end).format("LLLL"):null),s.a.createElement("button",{onClick:a.showDeleteContextMenu,value:t.task,className:"menuItembutton"}),s.a.createElement("div",{className:"list-link"},s.a.createElement("a",{href:"https://"+t.url,target:"_blank"},t.urlText)),s.a.createElement("button",{onClick:V,value:t.task,className:"menuLinkbutton"}),t.label?s.a.createElement(S.a,{className:"genericLabel",variant:ae[t.selectedLabelIdx]},t.label):null,s.a.createElement(B.a,{defaultActiveKey:"0"},s.a.createElement(Y.a,{className:"invisible-card"},s.a.createElement(B.a.Toggle,{className:"accordion-toggle",eventKey:"1"},s.a.createElement(_.a,{striped:!0,now:t.progressState?"defined"===t.progressState?10:"inprogress"===t.progressState?60:100:10}),"Status:"," ",t.progressState?t.progressState:"Defined"),s.a.createElement(B.a.Collapse,{eventKey:"1"},s.a.createElement(Y.a.Body,{className:"invisible-card-body"}," ",s.a.createElement("select",{className:"custom-select",value:t.progressState,task:t.task,onChange:O},s.a.createElement("option",{value:"defined",key:"0"},"Defined"),s.a.createElement("option",{value:"inprogress",key:"1"},"In Progress"),s.a.createElement("option",{value:"completed",key:"2"},"Completed")))))))})))):s.a.createElement(h.a,{appId:"176625356093687",autoLoad:!1,callback:K,cssClass:"my-facebook-button-class",fields:"name,email,picture"})))},a.state={curDeadline:"",tasks:[],shouldShowColors:!1,tempPosition:[],curTask:"",tempTask:"",displayAllContextMenus:!1,displaySortingOptionsMenu:!1,displayTaskCtxMenu:!1,displayLinkCtxMenu:!1,displayLabelCtxMenu:!1,displayDeleteCtxMenu:!1,displayCurtain:!1,currentURL:"",currentURLText:"",showModal:!1,currentModalTask:{},currentRichText:"",currentLabel:"",didRichTextChange:!1,selectedLabelIdx:0,labels:new Set,menuOptionsList:[{text:"Add deadline",onClick:function(){a.setState({displayAllContextMenus:!1,displayTaskCtxMenu:!0,displayCurtain:!1})}},{text:"Add link",onClick:function(){a.setState({displayAllContextMenus:!1,displayLinkCtxMenu:!0,displayCurtain:!1})}},{text:"Add Label",onClick:function(){var e="";a.state.tasks.forEach((function(t){t.task===a.state.tempTask&&(e=t.label)})),a.setState({displayAllContextMenus:!1,displayLabelCtxMenu:!0,currentLabel:e,displayCurtain:!1})}}],sortingOptions:[{text:"Sort By Label",onClick:function(){a.sortTasksByLabel()}},{text:"Sort By Deadline",onClick:function(){a.sortTasksByEndTime()}}]},a}return Object(d.a)(t,e),t}(s.a.Component),X=Object(P.b)((function(e){return{loggedin:e.loggedin,userName:e.userName}}),(function(e){return{facebookLoginDispatch:function(t){e({type:"facebookLogin",payload:t})}}}))(q),H=a(56);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G={loggedin:!1,userName:""},K="facebookLogin",Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;return"undefined"===a?e:a===K?Object.assign({},G,{loggedin:n.loggedin,userName:n.userName}):e},V=Object(H.b)(Q,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r.a.render(s.a.createElement(P.a,{store:V},s.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[158,1,2]]]);
//# sourceMappingURL=main.911e91ec.chunk.js.map